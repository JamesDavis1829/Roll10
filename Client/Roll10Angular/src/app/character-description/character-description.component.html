
<div [id]="targetCharacter.id" class="flex justify-center">
  <div class="rounded shadow-lg shadow-slate-800 bg-slate-50 w-full m-5">
    <p class="text-center rounded-t font-extrabold text-white bg-slate-600 text-xl uppercase">{{targetCharacter.name}}</p>
    <div class="flex flex-wrap justify-center">
      <ng-container *ngFor="let stat of GetStats()">
        <div
          [id]='this.targetCharacter.id + "-" + stat.name'
          class="w-20 h-20 m-5 rounded-full border-4 border-slate-400 bg-slate-700 text-white shadow-lg shadow-slate-800 hover:cursor-pointer"
          [title]="stat.name" (click)="RollStat(stat.abbreviation, stat.name)">
          <div class="h-3"></div>
          <p class="text-center font-bold">{{stat.stat}}</p>
          <p class="text-center font-bold">{{stat.abbreviation}}</p>
        </div>
      </ng-container>
      <div class="relative w-20 h-20 m-5 rounded-full border-4 border-red-700 bg-red-500 text-white shadow-lg shadow-slate-800"
           title="HP">
        <div class="h-3"></div>
        <p class="text-center font-bold">{{targetCharacter.hp}}</p>
        <p class="text-center font-bold select-none">HP</p>
        <div
          [id]='this.targetCharacter.id + "-hp-increment"'
          class="absolute h-20 w-7 top-0 left-0 hover:cursor-pointer"
          (click)='ApplyStatOperation(1, "HP")'>
          <span class="absolute top-5 left-1 font-extrabold select-none">+</span>
        </div>
        <div
          [id]='this.targetCharacter.id + "-hp-decrement"'
          class="absolute h-20 w-7 top-0 right-0 hover:cursor-pointer"
          (click)='ApplyStatOperation(-1, "HP")'>
          <span class="absolute top-5 right-1 font-extrabold select-none">-</span>
        </div>
      </div>
      <div class="relative w-20 h-20 m-5 rounded-full border-4 border-green-700 bg-green-500 text-white shadow-lg shadow-slate-800"
           title="STA">
        <div class="h-3"></div>
        <p class="text-center font-bold">{{this.targetCharacter.current_stamina}}</p>
        <p class="text-center font-bold select-none">STA</p>
        <div
          [id]='this.targetCharacter.id + "-stamina-increment"'
          class="absolute h-20 w-7 top-0 left-0 hover:cursor-pointer"
          (click)='ApplyStatOperation(1, "STA")'>
          <span class="absolute top-5 left-1 font-extrabold select-none">+</span>
        </div>
        <div
          [id]='this.targetCharacter.id + "-stamina-decrement"'
          class="absolute h-20 w-7 top-0 right-0 hover:cursor-pointer"
          (click)='ApplyStatOperation(-1, "STA")'>
          <span class="absolute top-5 right-1 font-extrabold select-none">-</span>
        </div>
      </div>
    </div>
    <div class="flex flex-col lg:flex-row">
      <div class="w-auto lg:w-1/3 m-3 border-slate-400 rounded shadow-md shadow-slate-800">
        <p class="text-center text-white text-lg bg-slate-600 rounded-t-md">Actions</p>
        <ul class="list-none">
          <ng-container *ngIf="!allCharacterActions.length && !this.targetCharacter.actions.length; else actionsList">
            <p class="italic text-center">None</p>
          </ng-container>
          <ng-template #actionsList>
            <ng-container *ngFor="let action of allCharacterActions.concat(this.targetCharacter.actions)">
              <app-rollable-entry [name]="action.name" [item]="action" [rollDice]="RollDice.bind(this)" [character]="targetCharacter">
                <p class="italic">Description: {{action.description}}</p>
              </app-rollable-entry>
            </ng-container>
          </ng-template>
        </ul>
      </div>
      <div class="w-auto lg:w-1/3 m-3 border-slate-400 rounded shadow-md shadow-slate-800">
        <p class="text-center text-white text-lg bg-slate-600 rounded-t-md up">Equipment</p>
        <ul class="list-none">
          <ng-container *ngIf="!targetCharacter.equipment.length; else equipmentList">
            <p class="italic text-center">None</p>
          </ng-container>
          <ng-template #equipmentList>
            <ng-container *ngFor="let item of targetCharacter.equipment">
              <app-rollable-entry [name]="item.name" [item]="item" [rollDice]="RollDice.bind(this)" [hideDiceRoll]="hideDiceRoll(item)" [character]="targetCharacter">
                <ng-container *ngIf="item.wield.length">
                  <p class="italic">Wielding: {{item.wield.join(", ")}}</p>
                </ng-container>
                <ng-container *ngIf="item.range">
                  <p class="italic">Range: {{item.range}}</p>
                </ng-container>
                <ng-container *ngIf="item.description">
                  <p class="italic">Description: {{item.description}}</p>
                </ng-container>
                <p class="italic">Requirements: STR-{{item.strength_requirement}}
                  AGI-{{item.agility_requirement}} INT-{{item.intelligence_requirement}}</p>
              </app-rollable-entry>
            </ng-container>
          </ng-template>
        </ul>
      </div>
      <div class="w-auto lg:w-1/3 m-3 border-slate-400 rounded shadow-md shadow-slate-800">
        <p class="text-center text-white text-lg bg-slate-600 rounded-t-md">Spells</p>
        <ul class="list-none">
          <ng-container *ngIf="!targetCharacter.spells.length; else spellList">
            <p class="italic text-center">None</p>
          </ng-container>
          <ng-template #spellList>
            <ng-container *ngFor="let spell of targetCharacter.spells">
              <app-rollable-entry [name]="spell.name" [item]="spell" [rollDice]="RollDice.bind(this)" [character]="targetCharacter">
                <ng-container *ngIf="spell.range">
                  <p class="italic">Range: {{spell.range}}</p>
                </ng-container>
                <ng-container *ngIf="spell.description">
                  <p class="italic">Description: {{spell.description}}</p>
                </ng-container>
                <p class="italic">Requirements: INT-{{spell.intelligence_requirement}}</p>
              </app-rollable-entry>
            </ng-container>
          </ng-template>
        </ul>
      </div>
    </div>
    <div class="flex flex-row justify-between">
      <div>
        <button [id]='targetCharacter.id + "-reset"' class="m-2" type="button" (click)="ResetCharacter()">Reset</button>
      </div>
      <div class="flex flex-row">
      </div>
    </div>
  </div>
</div>
