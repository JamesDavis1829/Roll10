@page "/"
@using Roll10.Models;
@using Roll10.Components;
@using Roll10.DiceService;
@inject Roll10.Services.IApiService apiservice;
@inject Roll10.Services.GlobalRefreshService globalRefreshService;


<Toast />
<DiceLog />
<div class="flex flex-col items-center">
    <div class="lg:w-10/12 w-full">
        @foreach (var character in characters)
        {
            <CharacterDescription Character="character"></CharacterDescription>
        }
    </div>
</div>

@code{
    public List<Character> characters = new List<Character>();
    protected override async Task OnInitializedAsync()
    {
        characters = (await apiservice.GetDefaultCharacters()).ToList();
        globalRefreshService.RefreshRequested += () => {
            this.StateHasChanged();
        };
    }
}